<?php include('header.php'); ?>

<div id="plans" class="content">
  <div id="facade">
    <!-------- GENERAL FACADE -------->

    <div id="general-facade">
      <div class="explorer-fix">
        <img src="http://p-scigala.pl/pages/residence-nyon/imgs/facade2.png" />
      </div>
      <?php include("imgs/facades2b.svg"); ?>
    </div>

    <!-------- REZ DE CHAUSSEE -------->

    <div id="floor-0e" class="floor-plan">
      <div class="explorer-fix">
        <img src="http://p-scigala.pl/pages/residence-nyon/imgs/plan1.jpg" />
      </div>
      <button class="fullscreen-close"></button>
      <?php include("imgs/plan1.svg"); ?>
    </div>

    <!-------- 1ER ETAGE -------------->

    <div id="floor-1e" class="floor-plan">
      <div class="explorer-fix">
        <img src="http://p-scigala.pl/pages/residence-nyon/imgs/plan2.jpg" />
      </div>
      <button class="fullscreen-close"></button>
      <?php include("imgs/plan2.svg"); ?>
    </div>

    <!-------- 2EME ETAGE ------------->

    <div id="floor-2e" class="floor-plan">
      <div class="explorer-fix">
        <img src="http://p-scigala.pl/pages/residence-nyon/imgs/plan2.jpg" />
      </div>
      <button class="fullscreen-close"></button>
      <?php include("imgs/plan3.svg"); ?>
    </div>

    <!-------- 3EME ETAGE ------------->

    <div id="floor-3e" class="floor-plan">
      <div class="explorer-fix">
        <img src="http://p-scigala.pl/pages/residence-nyon/imgs/plan2.jpg" />
      </div>
      <button class="fullscreen-close"></button>
      <?php include("imgs/plan4.svg"); ?>
    </div>

    <!-------- ATTIQUE ---------------->

    <div id="floor-4e" class="floor-plan">
      <div class="explorer-fix">
        <img src="http://p-scigala.pl/pages/residence-nyon/imgs/plan5.jpg" />
      </div>
      <button class="fullscreen-close"></button>
      <?php include("imgs/plan5.svg"); ?>
    </div>
  </div>
  <div id="facade-table">
    <!-------- TABLE ------------------>

    <div id="tablepress-1_wrapper" class="dataTables_wrapper no-footer">
      <table
        id="tablepress-1"
        class="tablepress tablepress-id-1 dataTable no-footer"
        role="grid"
      >
        <thead>
          <tr class="row-1 odd" role="row">
            <th
              class="column-1 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="N°Lot: activer pour trier la colonne par ordre croissant"
              style="width: 38px"
            >
              N°Lot
            </th>
            <th
              class="column-2 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Étage: activer pour trier la colonne par ordre croissant"
              style="width: 67px"
            >
              Étage
            </th>
            <th
              class="column-3 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Pcs: activer pour trier la colonne par ordre croissant"
              style="width: 23px"
            >
              Pcs
            </th>
            <th
              class="column-4 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Orient.: activer pour trier la colonne par ordre croissant"
              style="width: 45px"
            >
              Orient.
            </th>
            <th
              class="column-5 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Terrasse: activer pour trier la colonne par ordre croissant"
              style="width: 52px"
            >
              Terrasse
            </th>
            <th
              class="column-6 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Balcon: activer pour trier la colonne par ordre croissant"
              style="width: 43px"
            >
              Balcon
            </th>
            <th
              class="column-7 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Jardin: activer pour trier la colonne par ordre croissant"
              style="width: 38px"
            >
              Jardin
            </th>
            <th
              class="column-8 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Surf. vente: activer pour trier la colonne par ordre croissant"
              style="width: 67px"
            >
              Surf. vente
            </th>
            <th
              class="column-9 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Prix apt.: activer pour trier la colonne par ordre croissant"
              style="width: 52px"
            >
              Prix apt.
            </th>
            <th
              class="column-10 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Parking: activer pour trier la colonne par ordre croissant"
              style="width: 48px"
            >
              Parking
            </th>
            <th
              class="column-11 sorting"
              tabindex="0"
              aria-controls="tablepress-1"
              rowspan="1"
              colspan="1"
              aria-label="Prix total: activer pour trier la colonne par ordre croissant"
              style="width: 57px"
            >
              Prix total
            </th>
          </tr>
        </thead>
        <tbody class="row-hover">
          <tr class="row-2 even" role="row">
            <td class="column-1">Lot 1</td>
            <td class="column-2">Rez</td>
            <td class="column-3">3.5</td>
            <td class="column-4">E</td>
            <td class="column-5">55.0</td>
            <td class="column-6"></td>
            <td class="column-7">227.4</td>
            <td class="column-8">101.9</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-libre">Libre</td>
          </tr>
          <tr class="row-3 odd" role="row">
            <td class="column-1">Lot 2</td>
            <td class="column-2">Rez</td>
            <td class="column-3">4.5</td>
            <td class="column-4">N</td>
            <td class="column-5">51.8</td>
            <td class="column-6"></td>
            <td class="column-7">543.1</td>
            <td class="column-8">130.7</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-libre">Libre</td>
          </tr>
          <tr class="row-4 even" role="row">
            <td class="column-1">Lot 3</td>
            <td class="column-2">Rez</td>
            <td class="column-3">4.5</td>
            <td class="column-4">O</td>
            <td class="column-5">56.5</td>
            <td class="column-6"></td>
            <td class="column-7">431.3</td>
            <td class="column-8">125.2</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-5 odd" role="row">
            <td class="column-1">Lot 4</td>
            <td class="column-2">Rez</td>
            <td class="column-3">4.5</td>
            <td class="column-4">S</td>
            <td class="column-5">54.4</td>
            <td class="column-6"></td>
            <td class="column-7">248.4</td>
            <td class="column-8">137.7</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-6 even" role="row">
            <td class="column-1">Lot 5</td>
            <td class="column-2">1er</td>
            <td class="column-3">4.5</td>
            <td class="column-4">E</td>
            <td class="column-5"></td>
            <td class="column-6">43.2</td>
            <td class="column-7"></td>
            <td class="column-8">126.3</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-7 odd" role="row">
            <td class="column-1">Lot 6</td>
            <td class="column-2">1er</td>
            <td class="column-3">4.5</td>
            <td class="column-4">N</td>
            <td class="column-5"></td>
            <td class="column-6">41.5</td>
            <td class="column-7"></td>
            <td class="column-8">134.2</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-libre">Libre</td>
          </tr>
          <tr class="row-8 even" role="row">
            <td class="column-1">Lot 7</td>
            <td class="column-2">1er</td>
            <td class="column-3">4.5</td>
            <td class="column-4">O</td>
            <td class="column-5"></td>
            <td class="column-6">43.2</td>
            <td class="column-7"></td>
            <td class="column-8">128.0</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-9 odd" role="row">
            <td class="column-1">Lot 8</td>
            <td class="column-2">1er</td>
            <td class="column-3">4.5</td>
            <td class="column-4">S</td>
            <td class="column-5"></td>
            <td class="column-6">42.3</td>
            <td class="column-7"></td>
            <td class="column-8">140.8</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-10 even" role="row">
            <td class="column-1">Lot 9</td>
            <td class="column-2">2ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">E</td>
            <td class="column-5"></td>
            <td class="column-6">43.2</td>
            <td class="column-7"></td>
            <td class="column-8">126.3</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-11 odd" role="row">
            <td class="column-1">Lot 10</td>
            <td class="column-2">2ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">N</td>
            <td class="column-5"></td>
            <td class="column-6">41.5</td>
            <td class="column-7"></td>
            <td class="column-8">134.2</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-reserve">Réservé</td>
          </tr>
          <tr class="row-12 even" role="row">
            <td class="column-1">Lot 11</td>
            <td class="column-2">2ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">O</td>
            <td class="column-5"></td>
            <td class="column-6">43.2</td>
            <td class="column-7"></td>
            <td class="column-8">128.0</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-reserve">Réservé</td>
          </tr>
          <tr class="row-13 odd" role="row">
            <td class="column-1">Lot 12</td>
            <td class="column-2">2ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">S</td>
            <td class="column-5"></td>
            <td class="column-6">42.3</td>
            <td class="column-7"></td>
            <td class="column-8">140.8</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-14 even" role="row">
            <td class="column-1">Lot 13</td>
            <td class="column-2">3ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">E</td>
            <td class="column-5"></td>
            <td class="column-6">43.2</td>
            <td class="column-7"></td>
            <td class="column-8">126.3</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-15 odd" role="row">
            <td class="column-1">Lot 14</td>
            <td class="column-2">3ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">N</td>
            <td class="column-5"></td>
            <td class="column-6">41.5</td>
            <td class="column-7"></td>
            <td class="column-8">134.2</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-reserve">Réservé</td>
          </tr>
          <tr class="row-16 even" role="row">
            <td class="column-1">Lot 15</td>
            <td class="column-2">3ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">O</td>
            <td class="column-5"></td>
            <td class="column-6">43.2</td>
            <td class="column-7"></td>
            <td class="column-8">128.0</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-17 odd" role="row">
            <td class="column-1">Lot 16</td>
            <td class="column-2">3ème</td>
            <td class="column-3">4.5</td>
            <td class="column-4">S</td>
            <td class="column-5"></td>
            <td class="column-6">42.3</td>
            <td class="column-7"></td>
            <td class="column-8">140.8</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-18 even" role="row">
            <td class="column-1">Lot 17</td>
            <td class="column-2">Attique (R+4)</td>
            <td class="column-3">4.5</td>
            <td class="column-4">S-E</td>
            <td class="column-5">92.6</td>
            <td class="column-6"></td>
            <td class="column-7"></td>
            <td class="column-8">154.9</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-vendu">Vendu</td>
          </tr>
          <tr class="row-19 odd" role="row">
            <td class="column-1">Lot 18</td>
            <td class="column-2">Attique (R+4)</td>
            <td class="column-3">4.5</td>
            <td class="column-4">N-O</td>
            <td class="column-5">100.9</td>
            <td class="column-6"></td>
            <td class="column-7"></td>
            <td class="column-8">165.5</td>
            <td class="column-9">---</td>
            <td class="column-10">---</td>
            <td class="column-11 s-reserve">Réservé</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div id="morebox">
  <div>
    <div id="selected-data">
      <a class="button" id="all-download" target="_blank">
        Télécharger l'ensemble des plans</a
      >
      <a class="button" id="plan-download" target="_blank">
        Télécharger le plan PDF</a
      >
      <div id="info-table">
        <div id="lot-name"></div>
        <div>
          <span class="static-info">Étage</span><span id="etage"></span>
        </div>
        <div>
          <span class="static-info">Pièces</span><span id="pieces"></span>
        </div>
        <div>
          <span class="static-info">Orient.</span><span id="orient"></span>
        </div>
        <div>
          <span id="balcon" class="static-info">Tarase/Balcon</span
          ><span id="terrase"></span>
        </div>
        <div>
          <span class="static-info">Jardin</span><span id="jardin"></span>
        </div>
        <div>
          <span class="static-info">Surf. vente</span><span id="surface"></span>
        </div>
        <div>
          <span class="static-info">Prix apt.</span><span id="prixApt"></span>
        </div>
        <div>
          <span class="static-info">Parking</span><span id="parking"></span>
        </div>
        <div>
          <span class="static-info">Prix total</span><span id="prix"></span>
        </div>
      </div>

      <div id="facade-draft">
        <img src="" alt="" />
      </div>
    </div>

    <div id="app-plan">
      <img src="" alt="" />
    </div>

    <div class="fullscreen-close"></div>
  </div>
</div>

<script>
  var link = 'http://p-scigala.pl/pages/residence-nyon/';

  $('.floor').on('click', function () {
    var idn = this.id;
    if (idn !== 'floor-5') {
      $('#' + idn + 'e').css('left', '0');
    } else {
      window.open(link + 'plans/sous-sol.pdf');
    }
  });

  $('.fullscreen-close').on('click', function () {
    $('.floor-plan').css('left', '-100%');
  });

  $('.appartement').on('mouseover', function () {
    var idn = this.id;
    var idn2 = idn.slice(2);
    $('.row-' + idn2).css('background-color', 'rgba(126, 169, 77, .7)');
    $('.row-' + idn2).css('color', '#FFFFFF');
  });

  $('.appartement').on('mouseout', function () {
    var idn = this.id;
    var idn2 = idn.slice(2);
    $('.row-' + idn2).css('background-color', '');
    $('.row-' + idn2).css('color', '');
  });

  $('.appartement').on('click', function () {
    var idn = this.id;
    var idn2 = idn.slice(2);
    $('.row-' + idn2).click();
  });

  $('.row-hover tr').on('mouseover', function () {
    var cn = $(this).attr('class');
    cn = cn.slice(4);
    cn = parseInt(cn);
    $('#a-' + cn).css('fill', 'rgba(126, 169, 77, .7)');
    $('#a-' + cn).css('stroke', 'rgba(126, 169, 77, 1)');
  });

  $('.row-hover tr').on('mouseout', function () {
    var cn = $(this).attr('class');
    cn = cn.slice(4);
    cn = parseInt(cn);
    $('#a-' + cn).css('fill', '');
    $('#a-' + cn).css('stroke', '');
  });
  /*-----------------------------------------*/
  var line = $('tbody tr[class*=row]');
  var layer;
  line.on('mouseover', function () {
    etage = this.children[1].textContent;

    if (etage == 'Rez') {
      layer = 0;
    }
    if (etage == '1er') {
      layer = 1;
    }
    if (etage == '2ème') {
      layer = 2;
    }
    if (etage == '3ème') {
      layer = 3;
    }
    if (etage == 'Attique (R+4)') {
      layer = 4;
    }

    $('#floor-' + layer).css('fill', 'rgba(126, 169, 77, .7)');
    $('#floor-' + layer).css('stroke', 'rgba(126, 169, 77, 1)');
  });
  line.on('mouseout', function () {
    etage = this.children[1].textContent;
    if (etage == 'Rez') {
      layer = 0;
    }
    if (etage == '1er') {
      layer = 1;
    }
    if (etage == '2ème') {
      layer = 2;
    }
    if (etage == '3ème') {
      layer = 3;
    }
    if (etage == 'Attique (R+4)') {
      layer = 4;
    }
    $('#floor-' + layer).css('fill', '');
    $('#floor-' + layer).css('stroke', '');
  });

  var lot,
    etage,
    pcs,
    terrasse,
    balcon,
    jardin,
    surface,
    prixApt,
    parking,
    orient,
    balconChk,
    jardinChk,
    prix,
    facadeImage,
    planImage;

  line.on('click', function () {
    if (this.classList[0] !== 'row-1') {
      lot = this.children[0].textContent;
      etage = this.children[1].textContent;
      pcs = this.children[2].textContent;
      orient = this.children[3].textContent;
      balconChk = this.children[5].textContent;
      terrase =
        balconChk == ''
          ? this.children[4].textContent
          : this.children[5].textContent;
      balcon = balconChk !== '' ? 'Balcon' : 'Terrasse';
      jardinChk = this.children[6].textContent;
      jardin = jardinChk == '' ? '-' : this.children[6].textContent;
      surface = this.children[7].textContent;
      prixApt = this.children[8].textContent;
      parking = this.children[9].textContent;
      prix = this.children[10].textContent;
      etage = etage.split(' ');

      $('#lot-name').text(lot);
      $('#etage').text(etage[0]);
      $('#pieces').text(pcs);
      $('#orient').text(orient);
      $('#balcon').text(balcon);
      $('#terrase').text(terrase);
      $('#jardin').text(jardin);
      $('#surface').text(surface);
      $('#prixApt').text(prixApt);
      $('#parking').text(parking);
      $('#prix').text(prix);
      $('#morebox').css('opacity', '1');
      $('#morebox').css('visibility', 'visible');
      facadeImage = link + 'facades/' + lot.slice(4) + '.png';
      $('#facade-draft img').attr('src', facadeImage);
      planImage = link + 'plans/LOT_' + lot.slice(4) + '.jpg';
      $('#app-plan img').attr('src', planImage);
      $('#plan-download').attr(
        'href',
        link + 'plans/LOT_' + lot.slice(4) + '.pdf'
      );
      $('#all-download').attr('href', link + 'plans/Central_Park.pdf');
    }
  });

  $('.fullscreen-close').on('click', function (e) {
    e.stopPropagation();
    $('#morebox').css('opacity', '0');
    $('#morebox').css('visibility', 'hidden');
    $('#facade-draft img').attr('src', '');
    $('#app-plan img').attr('src', '');
  });

  var cnt = $('.row-hover tr').length;
  for (var x = 1; x <= cnt; x++) {
    var el = $('.row-' + (x + 1) + ' .column-11')
      .text()
      .toLowerCase();
    el = el.replace(/\s/g, '');
    el = el.replace(/\r?\n|\r/g, '');

    if (
      el == 'reserve' ||
      el == 'réserve' ||
      el == 'réservé' ||
      el == 'reservé'
    ) {
      $('.row-' + (x + 1) + ' .column-11').addClass('s-reserve');
      $('.row-' + (x + 1) + ' .column-10').text('---');
      $('.row-' + (x + 1) + ' .column-9').text('---');
    } else if (el == 'vendu') {
      $('.row-' + (x + 1) + ' .column-11').addClass('s-vendu');
      $('.row-' + (x + 1) + ' .column-10').text('---');
      $('.row-' + (x + 1) + ' .column-9').text('---');
    } else {
      $('.row-' + (x + 1) + ' .column-11').addClass('s-libre');
    }
  }

  /*** TABLE HIGH DEPENDING OF FACADE HIGH ***/

  // $(document).ready(function() {
  //     var docW = $(document).width();
  //     var tableHeight = $('#general-facade').height();
  //     $("#facade-table").css('height', tableHeight);
  // });

  // $(window).resize(function() {
  //     docW = $(document).width();
  //     if(docW > 800) {
  //         setTimeout(function() {
  //             tableHeight = $('#general-facade').height();
  //             $("#facade-table").css('height', tableHeight);
  //         }, 700);
  //     } else {
  //         $("#facade-table").css('height', "auto");
  //     }
  // });

  /*******************************************/
</script>

<script src="js/esc.js"></script>

<?php include('footer.php'); ?>
